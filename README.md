# Development Draft
Our GPU is in NVIDIA Turingâ„¢ architecture family. We test on WSL2_Ubuntu20.04 with Windows Driver release 516.59. Ubuntu20.04 in WSL2 uses version2.11.0 of nvidia-docker2.[The NVIDIA documentation]('https://docs.nvidia.com/deeplearning/frameworks/pytorch-release-notes/rel_22-04.html') mentions that nvcr.io/nvidia/pytorch:22:04 requires a 510 or higher driver.

---
+ download
  ```bash
  $ git clone --recurse-submodules https://github.com/YyuK-Liao/BRA
  ```
+ build docker image
  ```bash
  $ cd BRA/
  $ docker build tag ${IMAGE_NAME:TAG} .
  ```
+ run as command
  ```bash
  $ sudo docker run \
    -v ${HOST_PATH}:${CONTAINER_PATH} \
    --gpus all \
    --ipc=host \
    --ulimit memlock=-1 \
    --ulimit stack=67108864 \
    --rm \
    ${IMAGE_NAME:TAG} ${ARGS default is --help}
  ```
+ example
  ```bash
  $ cd BRA/
  $ docker build tag bras:beta0 .
  $ sudo docker run \
    -v /mnt/v/BRA/test:/test \
    --gpus all \
    --ipc=host \                    # NVIDIA recommends using
    --ulimit memlock=-1 \           # NVIDIA recommends using
    --ulimit stack=67108864 \       # NVIDIA recommends using
    --rm \                          # remove after done
    bras:beta0 \                    # below are some of the parameters in work_dev.py
    -vin /test/test_media.avi \     # input. maybe camera,stream,...
    -c ./test_conf.yaml \           # generated by BRA/tools/IConFiguration.py
    -fl 15000 \                     # after frame amount will stop
    -s "(-1):(720)" \               # output scale
    -vout /test/result.mkv \        # store result
    -vlog /test/storing.log \       # log file during storing
    -so rtsp://localhost:8554/bra \ # stream output
    -slog /test/stream.log \        # log file during streaming
    -en hevc_nvenc \                # encoder for stream and store
    --match_thresh 0.7 \            # tracking parameter
    --track_buffer 120              # tracking parameter
  ```